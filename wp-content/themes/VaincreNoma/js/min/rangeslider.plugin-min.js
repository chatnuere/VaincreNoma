!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function($){"use strict";function t(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function e(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)}function i(t,e){return e=e||100,function(){if(!t.debouncing){var i=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,i),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function n(t){return 0!==t.offsetWidth||0!==t.offsetHeight?!1:!0}function s(t){for(var e=[],i=t.parentNode;n(i);)e.push(i),i=i.parentNode;return e}function o(t,e){var i=s(t),n=i.length,o=[],h=t[e];if(n){for(var a=0;n>a;a++)o[a]=i[a].style.display,i[a].style.display="block",i[a].style.height="0",i[a].style.overflow="hidden",i[a].style.visibility="hidden";h=t[e];for(var l=0;n>l;l++)i[l].style.display=o[l],i[l].style.height="",i[l].style.overflow="",i[l].style.visibility=""}return h}function h(t,n){if(this.$window=$(window),this.$document=$(document),this.$element=$(t),this.options=$.extend({},u,n),this._defaults=u,this._name=a,this.startEvent=this.options.startEvent.join("."+a+" ")+"."+a,this.moveEvent=this.options.moveEvent.join("."+a+" ")+"."+a,this.endEvent=this.options.endEvent.join("."+a+" ")+"."+a,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&d)return!1;this.identifier="js-"+a+"-"+r++,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=$('<div class="'+this.options.fillClass+'" />'),this.$handle=$('<div class="'+this.options.handleClass+'" />'),this.$range=$('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=$.proxy(this.handleDown,this),this.handleMove=$.proxy(this.handleMove,this),this.handleEnd=$.proxy(this.handleEnd,this),this.init();var s=this;this.$window.on("resize."+a,i(function(){e(function(){s.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+a,function(t,e){if(!e||e.origin!==a){var i=t.target.value,n=s.getPositionFromValue(i);s.setPosition(n)}})}var a="rangeslider",l=[],r=0,d=t(),u={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};h.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},h.prototype.update=function(){this.handleWidth=o(this.$handle[0],"offsetWidth"),this.rangeWidth=o(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},h.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(t),i=this.$range[0].getBoundingClientRect().left,n=this.getPositionFromNode(this.$handle[0])-i;this.setPosition(e-this.grabX),e>=n&&e<n+this.handleWidth&&(this.grabX=e-n)}},h.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t);this.setPosition(e-this.grabX)},h.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},h.prototype.cap=function(t,e,i){return e>t?e:t>i?i:t},h.prototype.setPosition=function(t){var e,i;e=this.getValueFromPosition(this.cap(t,0,this.maxHandleX)),i=this.getPositionFromValue(e),this.$fill[0].style.width=i+this.grabX+"px",this.$handle[0].style.left=i+"px",this.setValue(e),this.position=i,this.value=e,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(i,e)},h.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},h.prototype.getRelativePosition=function(t){var e=this.$range[0].getBoundingClientRect().left,i=0;return"undefined"!=typeof t.pageX?i=t.pageX:"undefined"!=typeof t.originalEvent.clientX?i=t.originalEvent.clientX:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0].clientX?i=t.originalEvent.touches[0].clientX:t.currentPoint&&"undefined"!=typeof t.currentPoint.x&&(i=t.currentPoint.x),i-e},h.prototype.getPositionFromValue=function(t){var e,i;return e=(t-this.min)/(this.max-this.min),i=e*this.maxHandleX},h.prototype.getValueFromPosition=function(t){var e,i;return e=t/(this.maxHandleX||1),i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},h.prototype.setValue=function(t){t!==this.value&&this.$element.val(t).trigger("change",{origin:a})},h.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+a).removeAttr("style").removeData("plugin_"+a),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),l.splice(l.indexOf(this.$element[0]),1),l.length||this.$window.off("."+a)},$.fn[a]=function(t){return this.each(function(){var e=$(this),i=e.data("plugin_"+a);i||(e.data("plugin_"+a,i=new h(this,t)),l.push(this)),"string"==typeof t&&i[t]()})}});